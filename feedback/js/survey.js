var currentScreenIndex=0,NextScreenIndex=0,PreviousScreenIndex=0,nextScreenStack=[],prevScreenStack=[],feedbackFormId=$("#FeedbackFormId").val(),companyId=$("#CompanyId").val(),brandId=$("#BrandId").val(),branchId=$("#BranchId").val(),TotalFeedbackFormScreenCount=parseInt($("#TotalFeedbackFormScreenCount").val()),IsClickThrough=parseInt($("#IsClickThrough").val()),HidePrevNextButton=$("#HidePrevNextButton").val(),HideDoneButtonInClickThrough=parseInt($("#HideDoneButtonInClickThrough").val()),ShowSkipButtonInsteadOfNext=parseInt($("#ShowSkipButtonInsteadOfNext").val()),delayInClickThrough=500,animationDuration=delayInClickThrough/2,animationCount=1,ButtonColor=$("#ButtonColor").val(),ButtonSelectedColor=$("#ButtonSelectedColor").val(),ButtonFontColor=$("#ButtonFontColor").val(),ButtonSelectedFontColor=$("#ButtonSelectedFontColor").val(),LocationPopupOpens=!1,currentLanguageCode=$("#LoadedLanguageCode").val(),totalAssignedLangauages=$("#LanguageScreenOptions").find("li.lang-screen-sel-option").length,NextScreenStack=[],PreviousScreenStack=[],arrHideScreenNumItems=[],otpValidationMobileNumber="",otpValidateRefVal="",optValValidateSec=18e4,counterIntervalLoop="",arrSrcLableText={},isDesktop=!("ontouchstart"in window),deviceAgent=navigator.userAgent.toLowerCase();if(!isDesktop){var inIdentifiedTouchDevice=deviceAgent.match(/(android)/)||deviceAgent.match(/(iemobile)/)||deviceAgent.match(/iphone/i)||deviceAgent.match(/ipad/i)||deviceAgent.match(/ipod/i)||deviceAgent.match(/blackberry/i)||deviceAgent.match(/bada/i);inIdentifiedTouchDevice||(isDesktop=!0)}var resizeDone,visiblescreenNum=function(e){return-1===arrHideScreenNumItems.indexOf(e)?e:visiblescreenNum(e+1)};window.onresize=function(){clearTimeout(resizeDone),resizeDone=setTimeout(function(){adjustSurveyAsPerWinsowSize(currentScreenIndex)},100)},$(window).on("orientationchange",function(){setTimeout(function(){adjustSurveyAsPerWinsowSize(currentScreenIndex)},800)}),$(window).load(function(){$("#LoadingSurvey").hide(),$("#WebBrowserName").val(navigator.appCodeName),$("#WebBrowserVersion").val(navigator.appVersion),$("#WebDeviceAndBrowserInfo").val(navigator.userAgent),$("#WebUserOSPlatform").val(navigator.platform),$("#WebSourceUrl").val(document.referrer),$("#WebQueryString").val(window.location.search),$("#DeviceHeight").val($(window).height()),$("#DeviceWidth").val($(window).width()),makeIntroThankyouToMiddleScreen("intro-screen")}),$(document).ready(function(){var e=new Date;if($("#StartTimeFeedBack").val(e.getTime()),initiateWebSurvey(),""===$("#BranchId").val()&&1<=surveyAssignBranchCount){var t=!1,n=$("#LocationScreenOptions li.none-location").length;(n&&surveyAssignBranchCount<=2||1===surveyAssignBranchCount)&&(t=!0),t?0<n&&n===surveyAssignBranchCount?$("#BranchId").val($("#LocationScreenOptions").find("li.none-location").attr("tag-location")):$("#BranchId").val($("#LocationScreenOptions").find("li").not(".none-location").attr("tag-location")):(LocationPopupOpens=!0,$("#assignedLocationModal").modal({backdrop:"static",keyboard:!1}).css({width:"auto"}),$("#assignedLocationModal").modal("show"))}$(".location-screen-sel-option").click(function(){$(".location-screen-sel-option").removeClass("location-active"),$(this).addClass("location-active");var e=$(this).attr("tag-location");$("#assignedLocationModal").modal("hide"),$("#BranchId").val(e),1===totalAssignedLangauages||"screen"!==$("#LanguagePickView").val()&&"both"!==$("#LanguagePickView").val()||"before-intro"!==$("#SwitchLanguageScreenDisplay").val()&&"1"===$("#ShowIntroPageInKioskMode").val()||$(".language-btn").trigger("click")}),$("#LocationInputString").keyup(function(){var e=$(this).val();$("#LocationScreenOptions li").length;$("#LocationScreenOptions li").not(".none-location").each(function(){$(this).text().search(new RegExp(e,"i"))<0?$(this).slideUp("400",function(){0===$("#LocationScreenOptions li:visible").length?$(".no-location-found").show():$(".no-location-found").hide()}):$(this).slideDown("300",function(){0===$("#LocationScreenOptions li:visible").length?$(".no-location-found").show():$(".no-location-found").hide()})})}),$(".get-started-action").click(function(){"1"!==checkOtpValidation||isRunningPreview?startFillingSurvey():($(".intro-screen, .thank-you-screen, .wrapper").fadeOut("300"),$(".otp-validation-screen").show())}),$(".opt-validate-step").click(function(){otpValidationMobileNumber=$("#opt-step-1").find(".phone-input-second").val(),$("#opt-step-1").find(".error-element").remove(),""===otpValidationMobileNumber||isNaN(otpValidationMobileNumber)||otpValidationMobileNumber.length<6?$("#opt-step-1").find("h2").after('<span class="error-element"><i class="fa fa-times"></i> Please enter your valid Mobile number</span>'):(otpValidationMobileNumber=$("#opt-step-1").find(".phone-input-first").val()+"-"+otpValidationMobileNumber,sendWebSuveyValidateOtp(otpValidationMobileNumber,!1),$(".resend-otp").click(function(){sendWebSuveyValidateOtp(otpValidationMobileNumber,!0)}))}),$(".validate-otp").click(function(){validateSurveyOtp()}),$(".done-button").click(function(){if(validateCurrentScreenQuestions(!0)){var e=new Date;$("#OnSubmitDateTime").val(e.getTime()),submitSurvey(),isRunningPreview||""===strRedirectUrlFromWebSurvey||"0"!==$("#ShowThankyouPageInKioskMode").val()?(isRunningPreview||""===strRedirectUrlFromWebSurvey||$(".survey-redirect-message").show(),$(".done-button").hide(),$(".thank-you-screen").fadeIn(),$(".intro-screen, .wrapper, .survey-form-header, .survey-footer-pagination").fadeOut(),makeIntroThankyouToMiddleScreen("thank-you-screen")):$("#SavingAndRedirectingSurvey").show()}}),$(".top-next-prev-action").click(function(){$(this).hasClass("prev-screen")?callPreviousScreen():callNextScreen(),updatePaginationState()}),$(document).keypress(function(e){var t=document.activeElement.tagName,n=parseInt($(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container:visible").size());13===e.which&&0<currentScreenIndex&&!$("#SavingAndRedirectingSurvey").is(":visible")&&!$(".thank-you-screen").is(":visible")&&"TEXTAREA"!==t&&("INPUT"!==t||1===n&&"INPUT"===t)&&(e.preventDefault(),callNextScreen(),updatePaginationState())}),$(".language-btn").click(function(){$("#myLanguageModal").modal({backdrop:"true",keyboard:!1}).css({width:"auto"}),$("#myLanguageModal").modal("show")}),LocationPopupOpens||"screen"!==$("#LanguagePickView").val()&&"both"!==$("#LanguagePickView").val()||"before-intro"!==$("#SwitchLanguageScreenDisplay").val()&&"1"===$("#ShowIntroPageInKioskMode").val()||1!==totalAssignedLangauages&&$(".language-btn").trigger("click"),$(".lang-screen-sel-option").click(function(){if($(this).hasClass("lang-active"))$("#myLanguageModal").modal("hide");else{var e=$(this).attr("tag-language");$(".lang-screen-sel-option").removeClass("lang-active"),$(this).addClass("lang-active"),$("#myLanguageModal").modal("hide"),$(".language-btn").find("a").text(e.substring(0,2).toUpperCase()),updateTextInSetLanguage(e)}}),$("#LangugaeInputString").keyup(function(){var e=$(this).val();$("#LanguageScreenOptions li").length;$("#LanguageScreenOptions li").each(function(){$(this).text().search(new RegExp(e,"i"))<0?$(this).slideUp("400",function(){0===$("#LanguageScreenOptions li:visible").length?$(".no-language-found").show():$(".no-language-found").hide()}):$(this).slideDown("300",function(){0===$("#LanguageScreenOptions li:visible").length?$(".no-language-found").show():$(".no-language-found").hide()})})}),$(".phone-input-first").click(function(){var e=$(this).closest(".survey-field-container").attr("id");$("#myPhoneCodesModal").modal({backdrop:"static",keyboard:!1}).css({width:"auto"}),$("#myPhoneCodesModal").modal("show"),$("#PhoneCodeClickedEleId").val(e)}),$(".phone-input-first").length&&$.each(phoneCodes,function(e,t){$("#PhoneCodeOptions").append('<li class="phone-code-sel-option" tag-code="'+t.dial_code+'"><a class="flag_'+t.code+'" href="javascript:void(0);"><span>'+t.name+" "+t.dial_code+"</span></a></li>")}),$(".phone-code-sel-option").click(function(){var e=$(this).attr("tag-code");$("#myPhoneCodesModal").modal("hide"),""===$("#PhoneCodeClickedEleId").val()&&$("#opt-step-1").length?$("#opt-step-1").find(".phone-input-first").val(e):$("#"+$("#PhoneCodeClickedEleId").val()).find(".phone-input-first").val(e)}),$("#PhonecodeInputString").keyup(function(){var e=$(this).val();$("#PhoneCodeOptions li").length;$("#PhoneCodeOptions li").each(function(){$(this).text().search(new RegExp(e,"i"))<0?$(this).hide():$(this).show()}),0===$("#PhoneCodeOptions li:visible").length?$(".no-phonecode-found").show():$(".no-phonecode-found").hide()}),$("#LanguageScreenOptions, #PhoneCodeOptions").slimScroll(),isDesktop&&$(".wrapper").slimScroll({size:"10px",allowPageScroll:!1,touchScrollStep:20,wheelStep:10,width:!1,height:!1,alwaysVisible:!0}),initiateDatePickerOnFields(currentLanguageCode),placeStaticLabelsAndText(),$(".symbol-rating-choice").click(function(){var e=$(this).parent().attr("id"),n=$(this).index();$("#"+e).find(".symbol-rating-choice").each(function(e,t){e<=n-1?$(this).removeClass("in-active").addClass("selected").effect("pulsate",{times:animationCount},animationDuration):$(this).addClass("in-active").removeClass("selected")})}),$(".emotion-rating-choice, .circle-rating-choice").click(function(){var e=$(this).parent().attr("id"),t=$(this).index();$("#"+e).find(".emotion-rating-choice, .circle-rating-choice").addClass("in-active").removeClass("selected"),$("#"+e).find(".emotion-rating-choice, .circle-rating-choice").eq(t-1).addClass("selected").effect("pulsate",{times:animationCount},animationDuration)}),$(".nps-option").click(function(){$(this).closest(".survey-field-container").find(".nps-option").each(function(){$(this).addClass("in-active").removeClass("selected")}),$(this).removeClass("in-active").addClass("selected").effect("pulsate",{times:animationCount},animationDuration)}),$(".ces-option").click(function(){$(".ces-option").each(function(){$(this).addClass("in-active").removeClass("selected")}),$(this).removeClass("in-active").addClass("selected").effect("pulsate",{times:animationCount},animationDuration)}),$(".css-option").click(function(){$(".css-option").each(function(){$(this).addClass("in-active").removeClass("selected")}),$(this).removeClass("in-active").addClass("selected").effect("pulsate",{times:animationCount},animationDuration)}),$(".mcq-button, .ces-button, .css-button").click(function(){var e=$(this).closest(".survey-field-container").attr("id"),t=$("#"+e).closest(".survey-field-container").attr("f-name");"msqquestion"!==t?($("#"+e).find(".mcq-button, .ces-button, css-button").removeClass("selected"),$("#"+e).find(".mcq-button, .ces-button, .css-button").css({"background-color":ButtonColor,color:ButtonFontColor}),$(this).addClass("selected").effect("pulsate",{times:animationCount},animationDuration),$(this).css({"background-color":ButtonSelectedColor,color:ButtonSelectedFontColor}),"cssquestion"===t&&($(".css-button").each(function(){$(this).addClass("in-active").removeClass("selected")}),$(this).removeClass("in-active").addClass("selected"))):$(this).hasClass("selected")?($(this).removeClass("selected"),$(this).css({"background-color":ButtonColor,color:ButtonFontColor})):($(this).addClass("selected").effect("pulsate",{times:animationCount},animationDuration),$(this).css({"background-color":ButtonSelectedColor,color:ButtonSelectedFontColor}))}),$(".checkbox-option-withbox").click(function(){$thisObj=$(this),$(this).closest(".survey-field-container").find(".error-element").remove(),$(this).hasClass("selected")?($(this).removeClass("selected"),$(this).find(".glyph").css("color",""),$(this).css("border-color","")):($(this).addClass("selected"),$(this).find(".glyph").css("color",ButtonSelectedFontColor),$(this).css("border-color",ButtonSelectedColor),$thisObj.closest(".checkbox-option-withbox").effect("pulsate",{times:animationCount},animationDuration)),setTimeout(function(){$thisObj.closest(".survey-field-container").find(".hover-selected").removeClass("hover-selected")},75)}),$(".rdo-check-option-cont").find('input[type="checkbox"]').click(function(){$(this).is(":checked")&&$(this).parent().effect("pulsate",{times:animationCount},animationDuration)}),$(".rdo-option-withbox").on("click",function(){$thisObj=$(this),$(this).closest(".survey-field-container").find(".error-element").remove();var e=$(this).parent();$(this).hasClass("selected")||(e.find("li").removeClass("selected"),e.find("li").css("border-color",""),e.find("li").css("background-color",""),$(this).addClass("selected"),$(this).css("border-color",ButtonSelectedColor),$(this).find(".glyph").css("color",ButtonSelectedFontColor)),$thisObj.closest(".rdo-option-withbox").effect("pulsate",{times:animationCount},animationDuration),setTimeout(function(){callClickThrough("radio",$thisObj)},delayInClickThrough)}),$(".survey-field-container[field-type='SliderRating']").each(function(){var t=$(this),e=t.find('.seekbar input[type="range"]');e.on("input",function(){var e=t.find("input[type=range]").val();updateSliderStat(t,e)}).on("change",function(){t.find(".role-progress-bar").effect("pulsate",{times:animationCount},animationDuration),setTimeout(function(){callClickThrough("slider",e)},delayInClickThrough)})}),$(".survey-field-container").not("[field-type*=ScaleRating]").find('input[type="radio"]').click(function(){var e=$(this);e.closest("label").effect("pulsate",{times:animationCount},animationDuration),e.closest(".survey-field-container").find(".error-element").remove(),setTimeout(function(){callClickThrough("radio",e)},delayInClickThrough)}),$(".survey-field-container").find("select").change(function(){var e=$(this);e.closest("select").effect("pulsate",{times:animationCount},animationDuration),e.closest(".survey-field-container").find(".error-element").remove(),setTimeout(function(){callClickThrough("drop_down",e)},delayInClickThrough)}),$(".survey-field-container").find("button").click(function(){var e=$(this),t=e.closest(".survey-field-container").attr("f-name");e.closest(".survey-field-container").find(".error-element").remove(),"msqquestion"!==t&&setTimeout(function(){callClickThrough("mcq_button",e)},delayInClickThrough)}),$(".survey-field-container").find('input[type="checkbox"]').click(function(){$(this).closest(".survey-field-container").find(".error-element").remove(),$(this).closest(".survey-field-container").find(".hover-selected").removeClass("hover-selected")}),$(".survey-field-container").find('input[type="text"],textarea').change(function(){$(this).closest(".survey-field-container").find(".error-element").remove()}),$(".survey-field-container").not("[field-type*=radio_button],[field-type*=TermsAndConditions]").find('input[type="radio"]').click(function(){var e=$(this);e.closest("label").effect("pulsate",{times:animationCount},animationDuration),e.closest(".survey-field-container").find(".error-element").remove(),setTimeout(function(){callClickThrough("radio_rating",e)},delayInClickThrough)}),$(".survey-field-container").find(".symbol-rating-choice, .emotion-rating-choice, .circle-rating-choice").click(function(){var e=$(this);e.closest(".survey-field-container").find(".error-element").remove(),setTimeout(function(){callClickThrough("symbol_rating",e)},delayInClickThrough)}),$(".nps-option, .ces-option").click(function(){var e=$(this);e.closest(".survey-field-container").find(".error-element").remove(),setTimeout(function(){callClickThrough("single-option",e)},delayInClickThrough)}),$(".restart-survey-preview").click(function(){clearSurveyData(),$(".thank-you-screen").fadeOut(),initiateWebSurvey()}),$(".survey-field-container").find(".ranking-option-list").each(function(){var e=$(this);e.sortable({placeholder:"ui-ranking-state-highlight",containment:e.closest(".survey-field-container")})}),isDesktop&&($(".survey-field-container").find(".symbol-rating-choice").mouseover(function(){var e=$(this),t=e.parent().find(".symbol-rating-choice").index(e)+1;e.parent().find(".symbol-rating-choice:lt("+t+")").addClass("temp-mark")}).mouseleave(function(){$(".survey-field-container .symbol-rating-choice").removeClass("temp-mark")}),$(".survey-field-container").find(".form-radio, .form-checkbox, .checkbox-option-withbox, .rdo-option-withbox").mouseover(function(){$(this).addClass("hover-selected")}).mouseleave(function(){$(this).removeClass("hover-selected")}),$(".survey-field-container").find("button").mouseover(function(){$(this).addClass("hover-selected")}).mouseleave(function(){$(this).removeClass("hover-selected")})),preFillSurveyData(),fillEmbedResponse(),tackleMobileFieldDisplayLogic()});