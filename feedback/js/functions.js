function manipulateSkipAndHideScreenItems(){return $(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container").each(function(e){var t=$(this);if("1"===t.attr("has-skip-logic")){var i=t.attr("field-type"),n=t.attr("id").substring(12);switch(i){case"textbox":case"date":(r=(a=$("#SurveyField_"+n).find("input")).attr("action-taken"))&&manageStackValues(a,r,"txtinput");break;case"textarea":(r=(a=$("#SurveyField_"+n).find("textarea")).attr("action-taken"))&&manageStackValues(a,r,"txtarea");break;case"phone_number_input_view":var a,r;(r=(a=$("#SurveyField_"+n).find("input.phone-input-second")).attr("action-taken"))&&manageStackValues(a,r,"txtinput");break;case"ScaleRating":var o=t.attr("rating-scale-template"),s=$("#SurveyField_"+n).find(".option-row-cont").length;if("radio_rating_scale"===o&&1===s)$("#SurveyField_"+n).find('input[type="radio"]').each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t,"radio")});else if("emotion_rating_scale"!==o&&"circle_rating_scale"!==o||1!==s){if(1===s){var c=$("#SurveyField_"+n).find(".selected").length;$("#SurveyField_"+n).find(".symbol-rating-choice").each(function(e){var t=$(this),i=t.attr("action-taken");i&&manageStackValues(t,i,"symbolRating",c,e)})}}else $("#SurveyField_"+n).find(".emotion-rating-choice, .circle-rating-choice").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t)});break;case"drop_down":$("#SurveyField_"+n).find("option").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t,"dropdown")});break;case"checkbox":var d=t.attr("options-has-image");$("#SurveyField_"+n).find('input[type="checkbox"], ul>li').each(function(){var e=$(this),t=e.attr("action-taken");t&&("1"===d?manageStackValues(e,t):manageStackValues(e,t,"checkbox"))});break;case"TermsAndConditions":case"radio_button":d=t.attr("options-has-image");$("#SurveyField_"+n).find('input[type="radio"], ul>li').each(function(){var e=$(this),t=e.attr("action-taken");t&&("1"===d?manageStackValues(e,t):manageStackValues(e,t,"radio"))});break;case"EffortRating":$("#SurveyField_"+n).find(".ces-option, .ces-button").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t)});break;case"SatisfactionRating":$("#SurveyField_"+n).find(".css-option, .css-button").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t)});break;case"mcq_button":$("#SurveyField_"+n).find(".mcq-button").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t)});break;case"SliderRating":$("#SurveyField_"+n).find(".range-break-points button").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t)});break;case"NumberRating":$("#SurveyField_"+n).find(".nps-option").each(function(){var e=$(this),t=e.attr("action-taken");t&&manageStackValues(e,t)})}}}),!0}function manageStackValues(e,t,i,n,a){var r=!1,o=!1,s=e.attr("skip-to-screen"),c=e.attr("hide-screen");if(""!==s){if(void 0!==i&&i.match(/txtinput|txtarea/))""!==$.trim(e.val())&&"NB"===t?r=!0:""===$.trim(e.val())&&"LB"===t&&(r=!0);else if(void 0!==i&&i.match(/radio|checkbox|dropdown/))e.is(":checked")&&"EQ"===t?r=!0:e.is(":checked")||"NEQ"!==t||(r=!0);else if(void 0!==i&&i.match(/symbolRating/)){var d=a+1;e.hasClass("selected")&&d===n&&"EQ"===t?r=!0:(!e.hasClass("selected")||d<n)&&"NEQ"===t&&(r=!0)}else e.hasClass("selected")&&"EQ"===t?r=!0:e.hasClass("selected")||"NEQ"!==t||(r=!0);r&&(NextScreenStack.pop(),"thankyou"!==s&&(s=parseInt(s)),NextScreenStack.push(s))}if(""!==c){var l=c.split(",");if(void 0!==i&&i.match(/txtinput|txtarea/))""!==$.trim(e.val())&&"NB"===t?o=!0:""===$.trim(e.val())&&"LB"===t&&(o=!0);else if(void 0!==i&&i.match(/radio|checkbox|dropdown/))e.is(":checked")&&"EQ"===t?o=!0:e.is(":checked")||"NEQ"!==t||(o=!0);else if(void 0!==i&&i.match(/symbolRating/)){d=a+1;e.hasClass("selected")&&d===n&&"EQ"===t?o=!0:(!e.hasClass("selected")||d<n)&&"NEQ"===t&&(o=!0)}else e.hasClass("selected")&&"EQ"===t?o=!0:e.hasClass("selected")||"NEQ"!==t||(o=!0);$.each(l,function(e,t){var i=arrScreenIndexInfo[t],n=arrHideScreenNumItems.indexOf(i);-1!==n&&arrHideScreenNumItems.splice(n,1),o&&arrHideScreenNumItems.push(i)})}return!0}function callNextScreen(){if(validateCurrentScreenQuestions(!0)){manipulateSkipAndHideScreenItems();var e="";if(NextScreenStack.length){var t=NextScreenStack.pop();if("thankyou"===t)return void $(".done-button").trigger("click");var i=arrScreenIndexInfo[t];e="feedbackscreen-"+i,NextScreenIndex=i}else{if(arrHideScreenNumItems.length&&(NextScreenIndex=visiblescreenNum(NextScreenIndex)),NextScreenIndex>ScreenCountNum)return void $(".done-button").trigger("click");e="feedbackscreen-"+NextScreenIndex}PreviousScreenStack.push(currentScreenIndex),$(".wrapper").hide(),$(".feedbackscreen-"+NextScreenIndex).fadeIn(),handleCustomBackground(NextScreenIndex),showHideTopNavButAction(e),pipingFill(currentScreenIndex),adjustQuestionsOnUI(currentScreenIndex),handleDisplayOfScreenIfNoQuestioVisible()}}function callPreviousScreen(){PreviousScreenStack.length&&(PreviousScreenIndex=PreviousScreenStack.pop()),$(".wrapper").hide(),$(".feedbackscreen-"+PreviousScreenIndex).fadeIn(),handleCustomBackground(PreviousScreenIndex),showHideTopNavButAction("feedbackscreen-"+PreviousScreenIndex),adjustQuestionsOnUI(currentScreenIndex),handleDisplayOfScreenIfNoQuestioVisible("prev")}function showHideTopNavButAction(e){var t=e.split("-");currentScreenIndex=parseInt(t[1]),NextScreenIndex=currentScreenIndex+1,PreviousScreenIndex=currentScreenIndex-1;var i=parseInt($("#TotalFeedbackFormScreenCount").val());$(".survey-language-btn, .prev-screen, .next-screen, .done-button").hide(),$(".survey-form-header, .survey-footer-pagination").show(),1===i?("button"===$("#LanguagePickView").val()&&-1!==$.inArray($("#SwitchLanguageButtonDisplay").val(),["survey","both"])&&$(".survey-language-btn").show(),handleDoneButtonDisplayOnLastScreen()):2<i?1===currentScreenIndex?("button"!==$("#LanguagePickView").val()&&"both"!==$("#LanguagePickView").val()||-1===$.inArray($("#SwitchLanguageButtonDisplay").val(),["survey","both"])||$(".survey-language-btn").show(),"both"!==HidePrevNextButton&&"next"!==HidePrevNextButton&&$(".next-screen").show()):currentScreenIndex===i?(handleDoneButtonDisplayOnLastScreen(),"both"!==HidePrevNextButton&&"prev"!==HidePrevNextButton&&$(".prev-screen").show()):("both"!==HidePrevNextButton&&"prev"!==HidePrevNextButton&&$(".prev-screen").show(),"both"!==HidePrevNextButton&&"next"!==HidePrevNextButton&&$(".next-screen").show()):1===currentScreenIndex?("button"!==$("#LanguagePickView").val()&&"both"!==$("#LanguagePickView").val()||-1===$.inArray($("#SwitchLanguageButtonDisplay").val(),["survey","both"])||$(".survey-language-btn").show(),"both"!==HidePrevNextButton&&"next"!==HidePrevNextButton&&$(".next-screen").show()):(handleDoneButtonDisplayOnLastScreen(),"both"!==HidePrevNextButton&&"prev"!==HidePrevNextButton&&$(".prev-screen").show()),ShowSkipButtonInsteadOfNext&&0===$(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container[f-required='1']").length&&currentScreenIndex!==TotalFeedbackFormScreenCount?($("#FormHeaderTopStrip").find(".next-screen").find("span").text(surveyStyleInformation.ButtonText.SkipNavText[currentLanguageCode]),$("#FormHeaderTopStrip").find(".next-screen").show()):$("#FormHeaderTopStrip").find(".next-screen").find("span").text(surveyStyleInformation.ButtonText.NextArrowText[currentLanguageCode])}function updatePaginationState(){var e=currentScreenIndex/TotalFeedbackFormScreenCount*100;$("#FooterPagination").find(".progress-bar").css("width",e+"%"),$("#FooterPagination").find(".dot-pagination").find("ul>li").find("a").css("background-color",ButtonColor),$("#FooterPagination").find(".dot-pagination").find("ul>li").eq(currentScreenIndex-1).find("a").css("background-color",ButtonSelectedColor),$("#FooterPagination").find(".curr-page-num").text(currentScreenIndex)}function validateCurrentScreenQuestions(e){var l=0,u="",f="",p=0,h=0,g="",m="",v="",F="";if($(".error-element").remove(),$(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container").each(function(){if(u=$(this).attr("field-type"),f=$(this).attr("f-name"),m=$(this).attr("f-input-type"),p=parseInt($(this).attr("f-required")),h=parseInt($(this).attr("is-hide-field")),$(this).attr("validate-term"),1===h)return!0;switch(isRunningTemplatePreview&&(p=0),g=$(this).attr("id"),fieldOptionHasImage=parseInt($(this).attr("options-has-image")),minOptionSelectionCount=parseInt($(this).attr("min-option-sel-count")),u){case"TermsAndConditions":case"radio_button":fieldOptionHasImage?p&&!$(this).find("li").hasClass("selected")&&(placeErrorElement(g,"required"),l++):p&&!$(this).find("input").is(":checked")&&(placeErrorElement(g,"required"),l++);break;case"checkbox":fieldOptionHasImage?p&&!$(this).find("li").hasClass("selected")&&(placeErrorElement(g,"required"),l++):p&&!$(this).find('input[type="checkbox"]').is(":checked")&&(placeErrorElement(g,"required"),l++);break;case"mcq_button":p&&!$(this).find("button").hasClass("selected")&&(placeErrorElement(g,"required"),l++);break;case"drop_down":var e=$(this).find("select").val();p&&""===e&&!e.length&&(placeErrorElement(g,"required"),l++);break;case"date":case"textarea":case"phone_number_input_view":case"textbox":var t=!0;if("textarea"===u){e=$.trim($(this).find("textarea").val());m="ParaArea"}else if("phone_number_input_view"===u){e=$.trim($(this).find("input.phone-input-second").val());var i=parseInt($(this).find("input.phone-input-second").attr("maxlength")),n=parseInt($(this).find("input.phone-input-second").attr("minlength"))}else if(f.match(/text_box/)){v=$(this).find("input").attr("max-value"),F=$(this).find("input").attr("min-value");var a=parseInt(v),r=parseInt(F);e=$.trim($(this).find("input").val())}else{f.match(/website\/url|facebook|url/)?m="url":f.match(/twitter/)?m="twitter_handle":""===m&&(m="simple_text");e=$.trim($(this).find("input").val()),i=parseInt($(this).find("input").attr("maxlength")),n=parseInt($(this).find("input").attr("minlength"))}var o=e.length;p&&""===e&&t&&(placeErrorElement(g,"required"),t=!1,l++),m.match(/Full_Name/)&&t&&!/^([^0-9]*)$/.test(e)&&(placeErrorElement(g,"non-numeric"),t=!1,l++),m.match(/simple_text/)&&t&&o&&/[!$%^&*()_+|~=`\\#{}\[\]:";'<>?\/]/.test(e)&&(placeErrorElement(g,"invalid-text"),t=!1,l++),m.match(/url/)&&t&&o&&!/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)&&(placeErrorElement(g,"url"),t=!1,l++),m.match(/Mobile_Number/)&&t&&o&&!/^\d+$/.test(e)&&(placeErrorElement(g,"only-digits"),t=!1,l++),m.match(/Full_Name/)&&t&&/[-!@$%^&*()_+|~=`\\#{}\[\]:";'<>?,.\/]/.test(e)&&(placeErrorElement(g,"no-special-char"),t=!1,l++),m.match(/Email_Address/)&&t&&""!==e&&!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)&&(placeErrorElement(g,"invalid-email"),t=!1,l++),m.match(/twitter_handle/)&&t&&o&&!/@([A-Za-z0-9_]{1,15}$)/.test(e)&&(placeErrorElement(g,"invalid-twitter-handle"),t=!1,l++),(p||o)&&t&&i&&i<o&&(placeErrorElement(g,"exceed-maxlength"),t=!1,l++),(p||o)&&t&&n&&o<n&&(placeErrorElement(g,"less-minlength"),t=!1,l++),m.match(/Alphanumeric|Text/)&&t&&/[!$%^&*()_+|~=`\\#{}\[\]:";'<>?\/]/.test(e)&&(placeErrorElement(g,"invalid-text"),t=!1,l++),m.match(/TextWithoutSpace|AlphabetsWithoutSpace|AlphanumericWithoutSpace/)&&t&&/[!$%^&*()_+|~=`\\#{}\[\]:";'<>?\s\/]/.test(e)&&(placeErrorElement(g,"invalid-text-or-space"),t=!1,l++),m.match(/Numeric/)&&t&&o&&!/^\d+$/.test(e)&&(placeErrorElement(g,"only-digits"),t=!1,l++),(p||o)&&m.match(/Numeric/)&&t&&v&&parseInt(e)>a&&(placeErrorElement(g,"exceed-maxvalue","","",a),t=!1,l++),(p||o)&&m.match(/Numeric/)&&t&&F&&parseInt(e)<r&&(placeErrorElement(g,"lower-minvalue","","",r),t=!1,l++);break;case"ScaleRating":var s=$(this).attr("rating-scale-template"),c=0,d=$(this).find(".option-row-cont").length;"radio_rating_scale"===s?$(this).find(".option-row-cont").each(function(){$(this).find("input").is(":checked")&&c++}):$(this).find(".option-row-cont").each(function(){$(this).find(".selected").size()&&c++}),p&&c<d&&(placeErrorElement(g,"required"),l++);break;case"NumberRating":case"EffortRating":case"SatisfactionRating":p&&!$(this).find(".selected").size()&&(placeErrorElement(g,"required"),t=!1,l++);break;case"SliderRating":p&&!$(this).find(".range-break-points").find("button").hasClass("selected")&&(placeErrorElement(g,"required"),l++)}}),l){if(e){var t=$(".error-element").eq(0).closest(".survey-field-container"),i=t.index(),n=t.parent(),a=parseInt($(".feedbackscreen-"+currentScreenIndex).attr("screen-item-count")),r=0;r=2<a?(i+1)/a*1e3:100*(i+1);var o=$(".error-element").eq(0).closest(".survey-field-container"),s=o.position().top-n.find(".survey-field-container").first().position().top;n.animate({scrollTop:s},r),isDesktop&&$(".wrapper-working-area").find(".slimScrollDiv").length&&$(".wrapper").slimScroll({scrollTo:s,alwaysVisible:!0}),setTimeout(function(){o.find(".error-element").fadeTo(100,.1).fadeTo(200,1)},r)}return!1}return!0}function placeErrorElement(e,t,i,n,a){$("#"+e).find(".error-element").remove();var r="Invalid Input",o="";switch(void 0!==i&&(o=i),t){case"required":r=n||strings.validationMessages.required_field;break;case"invalid-text":r=n||strings.validationMessages.invalid_text;break;case"invalid-text-or-space":r=n||strings.validationMessages.invalid_text_or_space;break;case"no-special-char":r=n||strings.validationMessages.special_char_not_allowed;break;case"non-numeric":r=n||strings.validationMessages.number_not_allowed;break;case"invalid-email":r=n||strings.validationMessages.invalid_email;break;case"only-digits":r=n||strings.validationMessages.only_digits;break;case"url":r=n||strings.validationMessages.invalid_url;break;case"invalid-twitter-handle":r=n||strings.validationMessages.invalid_twitter_handle;break;case"exceed-maxlength":r=n||strings.validationMessages.exceed_maxlength;break;case"less-minlength":r=n||strings.validationMessages.less_minlength;break;case"exceed-maxvalue":r=n||(r=strings.validationMessages.exceed_maxvalue).replace("%s",a);break;case"lower-minvalue":r=n||(r=strings.validationMessages.lower_minvalue).replace("%s",a);break;case"min-choice-count":r=n||(r=strings.validationMessages.min_choice_count).replace("%s",a)}return $("#"+e).find(".field-main-label").after("<span class='error-element "+o+"'><i class='fa fa-times'></i> "+r+"</span>"),!0}function hideErrorElement(e,t){switch(t){case"non-numeric":case"required":$("#"+e).find(".error-element").remove();break;default:$("#"+e).find(".error-element").remove()}return!0}function updateTextInSetLanguage(f){arrSrcLableText={},currentLanguageCode=f,$("#LoadedLanguageCode").val(f),$.getScript(BASE_URL+"assets/survey/js/locale/lang."+f+".js",function(){getDisplayedErrorCount()&&validateCurrentScreenQuestions(!1),placeStaticLabelsAndText()}),PageMataTitle="Survey - "+surveyStyleInformation.InfoText.FeedbackFormTitle[f]+" | "+$("#WebsiteMainTagName").val(),$("title").html(PageMataTitle),ShowSkipButtonInsteadOfNext&&0===$(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container[f-required='1']").length?$("#FormHeaderTopStrip").find(".next-screen").find("span").text(surveyStyleInformation.ButtonText.SkipNavText[currentLanguageCode]):$("#FormHeaderTopStrip").find(".next-screen").find("span").text(surveyStyleInformation.ButtonText.NextArrowText[currentLanguageCode]),$("#FormHeaderTopStrip").find(".prev-screen").find("span").text(surveyStyleInformation.ButtonText.PreviousArrowText[f]),$("#FormHeaderTopStrip").find(".done-button").find("a").text(surveyStyleInformation.ButtonText.SubmitButtonText[f]),$("#IntroScreenUpperText").text(introScreenData.IntroUpperText[f]),$("#IntroScreenStartBtn").text(introScreenData.IntroTextIWantToGiveFeedbackText[f]),$("#IntroScreenBottomText").text(introScreenData.IntroBottomText[f]),$("#ThankyouScreenUpperText").text(thankyouScreenData.ThankUpperText[f]),$("#ThankyouScreenBottomText").text(thankyouScreenData.ThankBottomText[f]),$.each(surveyScreensData,function(e,t){$.each(t.Fields,function(e,n){switch($("#SurveyField_"+n.FieldId).find(".field-main-label").text(n.FieldLabel[f]),n.FieldType){case"date":case"textbox":case"textarea":case"phone_number_input_view":$("#SurveyField_"+n.FieldId).find(".field-main-text-input").attr("placeholder",n.PlaceHolder[f]),$("#SurveyField_"+n.FieldId).attr("validate-custom-error",n.RegexValidationMessage[f]);break;case"TermsAndConditions":$("#SurveyField_"+n.FieldId).find(".terms-and-condition-container").text(n.PlaceHolder[f]),$("#SurveyField_"+n.FieldId).find(".rdo-check-option-cont").hasClass("double-col")?(oi=0,$.each(n.OptionValue.FieldOption,function(e,t){e%2==0&&($("#SurveyField_"+n.FieldId).find(".rdo-check-option-left-cont").find(".choice-option-label").eq(oi).text(t.FieldOptionName[f]),oi++)}),oi=0,$.each(n.OptionValue.FieldOption,function(e,t){e%2==1&&($("#SurveyField_"+n.FieldId).find(".rdo-check-option-right-cont").find(".choice-option-label").eq(oi).text(t.FieldOptionName[f]),oi++)})):$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find(".choice-option-label").eq(e).text(t.FieldOptionName[f])});break;case"radio_button":case"checkbox":$("#SurveyField_"+n.FieldId).find(".rdo-check-option-cont").hasClass("double-col")?(oi=0,$.each(n.OptionValue.FieldOption,function(e,t){e%2==0&&($("#SurveyField_"+n.FieldId).find(".rdo-check-option-left-cont").find(".choice-option-label").eq(oi).text(t.FieldOptionName[f]),oi++)}),oi=0,$.each(n.OptionValue.FieldOption,function(e,t){e%2==1&&($("#SurveyField_"+n.FieldId).find(".rdo-check-option-right-cont").find(".choice-option-label").eq(oi).text(t.FieldOptionName[f]),oi++)})):$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find(".choice-option-label").eq(e).text(t.FieldOptionName[f])});break;case"RankingQuestion":$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find('.choice-option-label[tag-choice-id="'+t.FieldOptionId+'"]').text(t.FieldOptionName[f])});break;case"drop_down":$("#SurveyField_"+n.FieldId).find("option").eq(0).text(n.PlaceHolder[f]),$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find("option").eq(e+1).text(t.FieldOptionName[f])});break;case"mcq_button":oi=0,$.each(n.OptionValue.FieldOption,function(e,t){e%2==0&&($("#SurveyField_"+n.FieldId).find(".mcq-btn-option-container-left").find("button").eq(oi).text(t.FieldOptionName[f]),oi++)}),oi=0,$.each(n.OptionValue.FieldOption,function(e,t){e%2==1&&($("#SurveyField_"+n.FieldId).find(".mcq-btn-option-container-right").find("button").eq(oi).text(t.FieldOptionName[f]),oi++)});break;case"EffortRating":"cesquestionsmiley"===n.FieldName?$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find(".ces-option-label").eq(e).text(t.FieldOptionName[f])}):$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find("button").eq(e).text(t.FieldOptionName[f])});break;case"SatisfactionRating":$.each(n.OptionValue.FieldOption,function(e,t){$("#SurveyField_"+n.FieldId).find("button").eq(e).text(t.FieldOptionName[f])});break;case"NumberRating":$("#SurveyField_"+n.FieldId).find(".nps-first-help-text").text(n.HelpTextFirstOption[f]),$("#SurveyField_"+n.FieldId).find(".nps-last-help-text").text(n.HelpTextLastOption[f]);break;case"ScaleRating":var t=ratingScaleData[n.FieldId];switch(t.RatingScaleTemplate){case"smiley_rating_scale":case"star_rating_scale":case"chicken_rating_scale":case"beer_rating_scale":case"heart_rating_scale":case"thumb_rating_scale":case"burger_rating_scale":case"emotion_rating_scale":case"circle_rating_scale":var i=t.RatingFor[f].split("~~"),a=0;$.each(i,function(e,t){var i=t.split("~");$("#SurveyField_"+n.FieldId).find(".option-text").eq(e).text(i[0]),0===a&&(""===i[0]?$("#SurveyField_"+n.FieldId).find(".table-simple-symbol").addClass("without-option-master-text"):$("#SurveyField_"+n.FieldId).find(".table-simple-symbol").removeClass("without-option-master-text")),a++});var r=t.ChoiceHelpText[f],o=r.split(","),s=r.length;o.length<s+1?$("#SurveyField_"+n.FieldId).find(".table-simple-symbol").removeClass("no-text-top"):$("#SurveyField_"+n.FieldId).find(".table-simple-symbol").addClass("no-text-top"),$.each(o,function(e,t){$("#SurveyField_"+n.FieldId).find(".help-text-top-head").find("th").eq(e+1).text(t),$("#SurveyField_"+n.FieldId).find(".option-row-cont").each(function(){$(this).find("td").eq(e+1).find(".mobile-show-option").text(t)})});break;case"radio_rating_scale":i=t.RatingFor[f].split("~~");var c=t.RatingType[f].split(",");$.each(i,function(e,t){var i=t.split("~");""!==i[0]&&$("#SurveyField_"+n.FieldId).find(".option-row-cont").eq(e).find("td:first").text(i[0])}),$.each(c,function(e,t){""!==t&&($("#SurveyField_"+n.FieldId).find(".radio-label-text").find("th").eq(e+1).text(t),$("#SurveyField_"+n.FieldId).find(".option-row-cont").each(function(){$(this).find("td").eq(e+1).find(".mobile-show-option").text(t)}))})}break;case"SliderRating":var d=$("#SurveyField_"+n.FieldId),l=d.attr("total-option-count");$.each(n.OptionValue.FieldOption,function(e,t){0===e&&d.find(".slider-range-first-label").text(t.FieldOptionName[f]),e===l-1&&d.find(".slider-range-last-label").text(t.FieldOptionName[f]),d.find(".range-break-points").find("button").eq(e).text(t.FieldOptionName[f])});var u=d.find(".range-break-points").find("button").eq(getRangeSliderSelectedIndex(d)).text();d.find(".centre-btn").text(u)}})}),adjustQuestionsOnUI(currentScreenIndex)}function replacejscssfile(e,t,i){for(var n="js"==i?"script":"css"==i?"link":"none",a="js"==i?"src":"css"==i?"href":"none",r=document.getElementsByTagName(n),o=r.length;0<=o;o--)if(r[o]&&null!=r[o].getAttribute(a)&&-1!=r[o].getAttribute(a).indexOf(e)){var s=createjscssfile(t,i);r[o].parentNode.replaceChild(s,r[o])}}function createjscssfile(e,t){if("js"==t)(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",e);else if("css"==t){var i;(i=document.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e)}return i}function callClickThrough(e,t){var d=!0,i=$(".feedbackscreen-"+currentScreenIndex).find('.survey-field-container[is-hide-field="1"]').length,n=$(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container").not('[field-type="heading"],[field-type="single_line_text"]').length-i;switch($(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container").each(function(e){var t=$(this),i=t.attr("field-type"),n=t.attr("f-name"),a=parseInt($(this).attr("options-has-image"));if(1===parseInt(t.attr("is-hide-field")))return!0;switch(i){case"textarea":case"textbox":case"phone_number_input_view":if(""===(r=$(this).find(".field-main-text-input").val())&&!r.length)return d=!1;break;case"single_line_text":case"heading":case"drop_down":if(""===(r=$(this).find("select").val())&&!r.length)return d=!1;break;case"radio_button":case"TermsAndConditions":if(a){if(!$(this).find("li").hasClass("selected"))return d=!1}else if(!$(this).find("input").is(":checked"))return d=!1;break;case"mcq_button":if(!$(this).find("button").hasClass("selected")||"msqquestion"===n)return d=!1;break;case"date":var r;if(""===(r=$(this).find(".field-main-text-input").val())&&!r.length)return d=!1;break;case"SliderRating":if(!$(this).find(".range-break-points").find("button").hasClass("selected"))return d=!1;break;case"NumberRating":case"EffortRating":case"SatisfactionRating":if(!$(this).find(".selected").size())return d=!1;break;case"ScaleRating":var o=$(this).attr("rating-scale-template"),s=0,c=$(this).find(".option-row-cont").length;if("radio_rating_scale"===o?$(this).find(".option-row-cont").each(function(){$(this).find("input").is(":checked")&&s++}):$(this).find(".option-row-cont").each(function(){$(this).find(".selected").size()&&s++}),s<c)return d=!1;break;default:return console.log("Default called"),d=!1}}),e){case"date":case"radio":case"drop_down":case"single-option":case"mcq_button":case"slider":1<n&&!d?scrollToNextQuestionElement(t):d&&IsClickThrough&&moveSurveyForward();break;case"symbol_rating":if(1<n&&!d){var a=(o=t.closest(".survey-field-container")).find(".option-row-cont").length,r=0;o.find(".option-row-cont").each(function(){$(this).find(".selected").size()&&r++}),a===r&&scrollToNextQuestionElement(t)}else d&&IsClickThrough&&moveSurveyForward();break;case"radio_rating":if(1<n&&!d){var o;a=(o=t.closest(".survey-field-container")).find(".option-row-cont").length,r=0;o.find(".option-row-cont").each(function(){$(this).find("input").is(":checked")&&r++}),a===r&&scrollToNextQuestionElement(t)}else d&&IsClickThrough&&moveSurveyForward()}}function moveSurveyForward(){setTimeout(function(){currentScreenIndex===TotalFeedbackFormScreenCount?$(".done-button").trigger("click"):$(".next-screen").trigger("click")},1)}function scrollToNextQuestionElement(e){var t=e.closest(".survey-field-container").nextAll(":visible").first(),i=t.parent();if(void 0!==t.attr("id")){var n=t.position().top-i.find(".survey-field-container").first().position().top;i.animate({scrollTop:n},300),setTimeout(function(){0<t.find(".field-main-text-input").length&&t.find(".field-main-text-input").focus()},350),isDesktop&&$(".wrapper-working-area").find(".slimScrollDiv").length&&$(".wrapper").slimScroll({scrollTo:n,alwaysVisible:!0})}}function isRTL(){return!1}function changeDatePickerLanguage(n){$.getScript(BASE_URL+"assets/survey/js/locale/datepicker/bootstrap-datepicker."+n+".js",function(e,t,i){$(".date,.birthday, .anniversary").datepicker("remove"),initiateDatePickerOnFields(n)})}function initiateDatePickerOnFields(e){$(".date").datepicker({autoclose:!0,dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"-100:+0",onSelect:function(e){var t=$(this);t.effect("pulsate",{times:animationCount},animationDuration),setTimeout(function(){callClickThrough("date",t)},delayInClickThrough)}}),$(".birthday").datepicker({autoclose:!0,dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"-100:-3",onSelect:function(e){var t=$(this);t.effect("pulsate",{times:animationCount},animationDuration),setTimeout(function(){callClickThrough("date",t)},delayInClickThrough)}}),$(".anniversary").datepicker({autoclose:!0,yearRange:"-100:+0",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onSelect:function(e){var t=$(this);t.effect("pulsate",{times:animationCount},animationDuration),setTimeout(function(){callClickThrough("date",t)},delayInClickThrough)}})}function placeStaticLabelsAndText(){$(".language-modal-body").find(".language-text").text(strings.languagePopup.main_head_label),$("#LangugaeInputString").attr("placeholder",strings.languagePopup.search_input_placeholder),$("#PhonecodeInputString").attr("placeholder",strings.phoneCodePopup.search_input_placeholder),$("#myPhoneCodesModal .cancel-buton").text(strings.commonLabels.cancel)}function adjustQuestionsOnUI(e){var t=$("body").height()-$("#FormHeaderTopStrip").height()-$("#FooterPagination").height();$(".wrapper").css("max-height",t);var i=0;$(".feedbackscreen-"+e).find(".ces-option-button,.css-option-button").find(".ces-button,.css-button").each(function(e){var t=$(this).outerHeight();i<t&&(i=t)}),$(".feedbackscreen-"+e).find(".ces-button,.css-button").css("height",i+"px"),$(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container").each(function(){fieldType=$(this).attr("field-type"),fieldName=$(this).attr("f-name"),fieldInputType=$(this).attr("f-input-type"),fieldElementId=$(this).attr("id");var e=[];switch(fieldType){case"ScaleRating":if("radio_rating"===fieldName){$("#"+fieldElementId).find("ul.option-row-cont").each(function(){rowHeight=$(this).height(),e.push(rowHeight)});var t=Math.max.apply(Math,e);$("#"+fieldElementId).find("ul.option-row-cont").css("min-height",t)}else{$("#"+fieldElementId).find(".simple-symbol-row").each(function(){rowHeight=$(this).height(),e.push(rowHeight)});t=Math.max.apply(Math,e);$("#"+fieldElementId).find(".simple-symbol-row").css("min-height",t)}break;case"mcq_button":i=0,$("#"+fieldElementId).find(".mcq-button").each(function(e){var t=$(this).outerHeight();i<t&&(i=t)}),$("#"+fieldElementId).find(".mcq-button").css("height",i+"px")}}),makeElementToMiddleScreen(e)}function handleDoneButtonDisplayOnLastScreen(){1===IsClickThrough&&1===HideDoneButtonInClickThrough?$(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container").each(function(e){switch($(this).attr("field-type")){case"single_line_text":case"heading":case"drop_down":case"radio_button":case"mcq_button":case"NumberRating":case"EffortRating":case"SatisfactionRating":case"ScaleRating":$(".done-button").hide();break;default:return console.log("Default called"),$(".done-button").show(),!1}}):$(".done-button").show()}function makeElementToMiddleScreen(e){if($("body").hasClass("full-web-view")){(c=$(".feedbackscreen-"+e).find(".survey-field-container:visible").first()).css("margin-top","0px"),c.next().css("margin-top","0px");var t=$("body").height()-$("#FormHeaderTopStrip").height()-$("#FooterPagination").height(),i=0;$(".feedbackscreen-"+e).find(".survey-field-container:visible").each(function(){i+=$(this).outerHeight(!0)});var n=t/2,a=0;if(767<$(window).width()&&c.parent().hasClass("half-width")&&c.hasClass("double_column")&&c.nextAll(":visible").first().hasClass("double_column")){var r=c.nextAll(":visible").first(),o=r.height(),s=c.height();(i-=o<s?o:s)<t?a=n-i/2-0:(c.css("margin-top","30px"),r.css("margin-top","30px")),0<a&&(c.css("margin-top",a+"px"),r.css("margin-top",a+"px"))}else i<t?a=n-i/2-0:c.css("margin-top","30px"),0<a&&c.css("margin-top",a+"px")}else{var c;a=15;(c=$(".feedbackscreen-"+e).find(".survey-field-container:visible").first()).css("margin-top",a+"px")}}function makeIntroThankyouToMiddleScreen(e){var t=$("."+e);if(t.is(":visible")){var i=$("body").height(),n=t.find("header").height(),a=i/2-t.find("article.src-1").height()/2-n;a&&t.find("article.src-1").css("margin-top",a)}}function getDisplayedErrorCount(){return $(".error-element").length}function submitSurvey(){if(isRunningPreview)return!0;var e=new Date,t=getFilledData(),i=getStaffFormFilledData(),n=feedbackFormId,a=companyId,r=brandId,o=$("#BranchId").val(),s=timeConverter(parseInt($("#StartTimeFeedBack").val())),c=timeConverter(parseInt($("#StartTimeFeedBackFormFill").val())),d=timeConverter(parseInt($("#OnSubmitDateTime").val())),l=$("#LoadedLanguageCode").val(),u=e.getTimezoneOffset();$.ajax({type:"POST",url:BASE_URL+"submitSurvey",dataType:"json",data:{SurveyRefCode:surveyRefCode,TrackRefCode:trackRefCode,TimeOffset:u,FormLanguageCode:l,FeedbackFormId:n,CompanyId:a,BrandId:r,BranchId:o,StartTimeFeedBack:s,StartTimeFeedBackFormFill:c,OnSubmitDateTime:d,FormFilledData:t,StaffFormFilledData:i,WebIPAddress:$("#WebIPAddress").val(),WebBrowserName:$("#WebBrowserName").val(),WebBrowserVersion:$("#WebBrowserVersion").val(),WebDeviceAndBrowserInfo:$("#WebDeviceAndBrowserInfo").val(),WebUserOSPlatform:$("#WebUserOSPlatform").val(),WebSourceUrl:$("#WebSourceUrl").val(),WebQueryString:$("#WebQueryString").val(),SurveyUserLatitude:$("#SurveyUserLatitude").val(),SurveyUserLongitude:$("#SurveyUserLongitude").val(),SurveyUserLocation:$("#SurveyUserLocation").val(),DeviceHeight:$("#DeviceHeight").val(),DeviceWidth:$("#DeviceWidth").val()},success:function(e){$(".survey-form-header, .survey-footer-pagination, .wrapper-working-area, .intro-screen").remove(),"failure"===e.response?window.location.reload():""!==strRedirectUrlFromWebSurvey&&setTimeout(function(){window.location.href=strRedirectUrlFromWebSurvey},1e3*timeRedirectWebSurveyIn)}})}function getFilledData(){var p=[],h=[];return $(".wrapper-working-area").find(".survey-field-container").each(function(e,t){var i=$(this).attr("f-field-id"),n=$(this).attr("is-rating"),a=$(this).attr("field-category"),r=$(this).attr("f-name"),o=$(this).attr("field-type"),s="",c=$(this).attr("options-has-image"),d=!1,l={};if("C"===$(this).attr("field-category")){switch(o){case"textbox":case"textarea":s=$(this).find(".field-main-text-input").val();break;case"date":""===(s=$(this).find(".field-main-text-input").val())&&(d=!0);break;case"phone_number_input_view":""!==(s=$(this).find(".field-main-text-input").val())?s=$(this).find(".phone-input-first").val()+s:d=!0;break;case"heading":case"single_line_text":d=!0;break;default:d=!0}d||(l={FieldId:i,IsRating:n,FieldCategory:a,FieldName:r,FieldValue:s},p.push(l))}else{switch(o){case"RankingQuestion":var u=[];$(this).find(".ranking-withoutbox-option").each(function(){u.push($(this).attr("tag-choice-id"))});break;case"checkbox":u=[];"1"===c?$(this).find("li.selected").length?$(this).find("li.selected").each(function(){u.push($(this).attr("tag-choice-id"))}):d=!0:$(this).find('input[type="checkbox"]').is(":checked")?$(this).find('input[type="checkbox"]:checked').each(function(){u.push($(this).attr("tag-choice-id"))}):d=!0;break;case"drop_down":var f=$(this).find("select").val();""!==f&&f.length?s=f:d=!0;break;case"TermsAndConditions":case"radio_button":u=[];"1"===c?$(this).find("li.selected").length?$(this).find("li.selected").each(function(){u.push($(this).attr("tag-choice-id"))}):d=!0:$(this).find("input").is(":checked")?s=$(this).find("input:checked").attr("tag-choice-id"):d=!0;break;case"NumberRating":$(this).find(".nps-option").hasClass("selected")?s=$(this).find(".selected").attr("tag-choice-id"):d=!0;break;case"EffortRating":$(this).find(".ces-button,.ces-option").hasClass("selected")?s=$(this).find(".selected").attr("tag-choice-id"):d=!0;break;case"SatisfactionRating":$(this).find(".css-button,.css-option").hasClass("selected")?s=$(this).find(".selected").attr("tag-choice-id"):d=!0;break;case"mcq_button":if("msqquestion"===r){u=[];$(this).find(".mcq-button").hasClass("selected")?$(this).find(".selected").each(function(){u.push($(this).attr("tag-choice-id"))}):d=!0}else $(this).find(".mcq-button").hasClass("selected")?s=$(this).find(".selected").attr("tag-choice-id"):d=!0;break;case"ScaleRating":"radio_rating"===r?$(this).find(".option-row-cont").each(function(e,t){var i=$(this).attr("tag-option-id");if($(this).find("input").is(":checked")){var n=$(this).find("input:checked").attr("tag-choice-id"),a=$(this).find("input:checked").attr("tag-weight");s=s+i+"-"+n+"-"+a+","}}):$(this).find(".option-row-cont").each(function(e,t){var i=$(this).attr("tag-option-id");if($(this).find("td").hasClass("selected")){var n=$(this).find("td.selected:last").attr("tag-choice-id"),a=$(this).find("td.selected:last").attr("tag-weight");s=s+i+"-"+n+"-"+a+","}}),""===(s=s.slice(0,-1))&&(d=!0);break;case"SliderRating":$(this).find(".range-break-points").find("button").hasClass("selected")?s=$(this).find(".selected").attr("tag-choice-id"):d=!0;break;default:d=!0}d||("msqquestion"===r||"RankingQuestion"===o||"checkbox"===o||"radio_button"===o&&"1"===c?$.each(u,function(e,t){l={FieldId:i,IsRating:n,FieldCategory:a,FieldName:r,FieldValue:t},h.push(l)}):(l={FieldId:i,IsRating:n,FieldCategory:a,FieldName:r,FieldValue:s},h.push(l)))}}),{CustomerDetails:p,FeedbackFormDetails:h}}function getStaffFormFilledData(){var s=[];return $("#StaffFormFieldsContainer").find(".staff-field-container").each(function(e,t){var i=$(this).attr("f-field-id"),n=$(this).attr("f-name"),a="",r=!1,o={};switch($(this).attr("field-type")){case"textbox":case"textarea":a=$(this).find(".field-main-text-input").val();break;default:r=!0}r||(o={FieldId:i,FieldName:n,FieldValue:a},s.push(o))}),s}function timeConverter(e){var t=new Date(e);return t.getFullYear()+"-"+["01","02","03","04","05","06","07","08","09","10","11","12"][t.getMonth()]+"-"+addZero(t.getDate())+" "+addZero(t.getHours())+":"+addZero(t.getMinutes())+":"+addZero(t.getSeconds())}function addZero(e){return e<10&&(e="0"+e),e}function clearSurveyData(){return $(".wrapper-working-area").find(".field-main-text-input").val(""),$(".wrapper-working-area").find("li").removeClass("selected"),$(".wrapper-working-area").find(".nps-option, .num-ratings li, .ces-option").removeClass("in-active"),$(".wrapper-working-area").find(".ces-button").removeClass("selected"),$(".wrapper-working-area").find(".mcq-button, .ces-button").css({"background-color":ButtonColor,color:ButtonFontColor}),$(".wrapper-working-area").find('input[type="radio"],input[type="checkbox"] ').prop("checked",!1),NextScreenStack=[],PreviousScreenStack=[],arrHideScreenNumItems=[],!0}function preFillSurveyData(){if(""!==setCustomerTrackingEmail){var e=$(".survey-field-container[f-input-type='Email_Address']");e.find("input.field-main-text-input").val(setCustomerTrackingEmail),"1"===e.attr("hide-field-setting")&&e.attr("is-hide-field","1")}$.each(queryStringParams,function(e,t){$(".wrapper-working-area").find(".variable_cls_"+e).find(".field-main-text-input").filter(function(){$(this).val(t),$element=$(this).closest(".survey-field-container"),""!==t&&"1"===$element.attr("allow-hide-when-filled")&&$element.attr("is-hide-field","1")})}),$(".wrapper-working-area").find(".survey-field-container").each(function(){var a=$(this);switch(a.attr("field-type")){case"radio_button":$.each(queryStringParams,function(e,t){a.hasClass("variable_cls_"+e)&&a.find(".radio-button-label-text").each(function(){if($(this).text()===t)return $(this).trigger("click"),"1"===a.attr("allow-hide-when-filled")&&a.attr("is-hide-field","1"),!1})});break;case"drop_down":$.each(queryStringParams,function(e,t){a.hasClass("variable_cls_"+e)&&a.find(".field-main-text-input option").each(function(){if($(this).text()===t)return $(this).attr("selected","selected"),"1"===a.attr("allow-hide-when-filled")&&a.attr("is-hide-field","1"),!1})});break;case"mcq_button":$.each(queryStringParams,function(e,t){a.hasClass("variable_cls_"+e)&&a.find(".mcq-button").each(function(){if($(this).text()===t)return"1"===a.attr("allow-hide-when-filled")&&a.attr("is-hide-field","1"),$(this).trigger("click"),!1})});break;case"NumberRating":$.each(queryStringParams,function(e,t){a.hasClass("variable_cls_"+e)&&""!==t&&a.find("td label").each(function(){if($(this).text()===t)return $(this).trigger("click"),"1"===a.attr("allow-hide-when-filled")&&a.attr("is-hide-field","1"),!1})});break;case"SliderRating":$.each(queryStringParams,function(e,t){if(a.hasClass("variable_cls_"+e)){var i="";if(a.find(".range-break-points button").each(function(){if($(this).text()===t)return i=$(this).index(),!1}),0<=parseInt(i)){var n=parseInt(a.find('input[type="range"]').attr("division-cluster"))*(i+1);a.find('input[type="range"]').val(n),updateSliderStat(a,n),"1"===a.attr("allow-hide-when-filled")&&a.attr("is-hide-field","1")}}})}}),$.each(queryStringParams,function(e,t){$("#StaffFormFieldsContainer").find(".variable_cls_"+e).find(".field-main-text-input").val(t)}),adjustQuestionsOnUI(currentScreenIndex)}function fillLocationInfo(e){$("#SurveyUserLatitude").val(e.coords.latitude),$("#SurveyUserLongitude").val(e.coords.longitude)}function handleCustomBackground(e){var t=$(".feedbackscreen-"+e).attr("id").split("_"),i=parseInt(t[1]),n=$.inArray(i,screenIdsWithCustomSettings);if(-1!==n){itemValue=screenIdsWithCustomSettings[n];var a=screenWithCustomSettings[itemValue];$(".wrapper-outer").attr("style",'background-image:url("'+BASE_URL+"img_gallery/"+a.ImagePath+'")')}else if("1"===surveyStyleInformation.ApplyFeedbackFormBackgroundImage){var r="innerbg.jpg";surveyStyleInformation.GalleryFeedbackFormBackground&&(r=surveyStyleInformation.GalleryFeedbackFormBackground),$(".wrapper-outer").attr("style",'background-image:url("'+BASE_URL+"img_gallery/"+r+'")')}else $(".wrapper-outer").attr("style","background:"+surveyStyleInformation.BackgroundColor)}function initiateWebSurvey(){if("1"===$("#ShowIntroPageInKioskMode").val())$(".intro-screen").show();else if("1"!==checkOtpValidation||isRunningPreview){$(".feedbackscreen-1,.survey-form-header").show(),handleCustomBackground(1),showHideTopNavButAction("feedbackscreen-1"),adjustQuestionsOnUI(currentScreenIndex);var e=new Date;$("#StartTimeFeedBackFormFill").val(e.getTime()),pipingFill(currentScreenIndex),setTimeout(function(){handleDisplayOfScreenIfNoQuestioVisible()},200)}else $(".otp-validation-screen").show()}function startFillingSurvey(){var e=new Date;$("#StartTimeFeedBackFormFill").val(e.getTime()),$(".intro-screen, .thank-you-screen, .otp-validation-screen, .wrapper").fadeOut("300"),handleCustomBackground(1),setTimeout(function(){showHideTopNavButAction("feedbackscreen-1"),$(".feedbackscreen-1").show(),"screen"!==$("#LanguagePickView").val()&&"both"!==$("#LanguagePickView").val()||"after-intro"!==$("#SwitchLanguageScreenDisplay").val()||$(".language-btn").trigger("click"),adjustQuestionsOnUI(currentScreenIndex),pipingFill(currentScreenIndex),handleDisplayOfScreenIfNoQuestioVisible()},500)}function getRangeSliderSelectedIndex(e){var t=parseInt(e.find('input[type="range"]').val()),i=parseInt(e.find('input[type="range"]').attr("division-cluster"));return parseInt((t-1)/i)}function updateSliderStat(e,t){var i=e.find('.seekbar div[role="progressbar"]');e.find(".range-break-points").find("button").removeClass("selected"),e.closest(".survey-field-container").find(".error-element").remove(),i.css("width",t+"%"),i.attr("aria-valuenow",t);var n=getRangeSliderSelectedIndex(e),a=e.find(".range-break-points").find("button").eq(n).text();e.find(".range-break-points").find("button").eq(n).addClass("selected"),e.find(".centre-btn a").text(a),"1"===e.attr("is-gradient")&&(0<=t&&t<34?(e.find(".role-progress-bar").css("background-color","#FF0000"),e.find(".seekbar-progress").css("background-color","#FF0000")):34<=t&&t<67?(e.find(".role-progress-bar").css("background-color","#D98C00"),e.find(".seekbar-progress").css("background-color","#D98C00")):67<=t&&(e.find(".role-progress-bar").css("background-color","#008000"),e.find(".seekbar-progress").css("background-color","#008000")))}function adjustSurveyAsPerWinsowSize(e){adjustQuestionsOnUI(e),makeIntroThankyouToMiddleScreen("intro-screen"),makeIntroThankyouToMiddleScreen("thank-you-screen")}function sendWebSuveyValidateOtp(e,t){clearInterval(counterIntervalLoop),otpValidateRefVal=getUniqueRefString();var i="OTP expired. Either Resend OTP or Reload survey then try again.";$("#opt-step-1").find(".opt-validate-step").html("Sending OTP.."),$(".opt-validate-step,.resend-otp").css("pointer-events","none"),t&&$("#opt-step-2").find(".resend-otp").html("Sending OTP..");var n=optValValidateSec/1e3;$("#opt-step-2").find(".counter").html(""),$.ajax({method:"POST",dataType:"json",url:BASE_URL+"sendSurveyOtp",data:{FeedbackFormId:feedbackFormId,Mobile:e,UniqueRefStr:otpValidateRefVal},error:function(){$("#opt-step-1").find(".opt-validate-step").html("Next"),$("#opt-step-1").find("h2").after('<span class="error-element"><i class="fa fa-times"></i> Some error in sending OTP. Please try again</span>'),$(".opt-validate-step,.resend-otp").css("pointer-events","")},success:function(e){$("#opt-step-2").find(".msg-direction").html("OTP sent successfully. "),t&&$("#opt-step-2").find(".msg-direction").html("OTP resent successfully. "),$("#opt-step-2").find(".counter").html("You have "+n+" seconds left"),$("#opt-step-1,#opt-step-2").find(".error-element").remove(),$(".opt-validate-step,.resend-otp").css("pointer-events",""),$("#opt-step-1").find(".opt-validate-step").html("Next"),t&&$("#opt-step-2").find(".resend-otp").remove(),"success"===e.response?($("#opt-step-1").remove(),$("#opt-step-2").show(),counterIntervalLoop=setInterval(function(){0<=n&&$("#opt-step-2").find(".counter").html("You have "+n+" seconds left"),0===n&&(otpValidateRefVal="",clearInterval(n),$("#opt-step-2").find(".msg-direction").html(""),t&&(i="OTP expired. Reload survey and try again."),$("#opt-step-2").find(".counter").html(i)),n--},1e3)):$("#opt-step-1,#opt-step-2").find("h2").after('<span class="error-element"><i class="fa fa-times"></i> Some error in sending OTP. Please try again</span>')}})}function validateSurveyOtp(){$("#opt-step-1,#opt-step-2").find(".error-element").remove(),$("#opt-step-2").find(".validate-otp").html("Validating.."),$(".validate-otp,.resend-otp").css("pointer-events",""),$.ajax({method:"POST",url:BASE_URL+"validateSurveyOtp",dataType:"json",data:{FeedbackFormId:feedbackFormId,Otp:$("#opt-step-2").find(".field-main-text-input").val(),UniqueRefStr:otpValidateRefVal},error:function(){$(".validate-otp,.resend-otp").css("pointer-events",""),$("#opt-step-2").find(".validate-otp").html("Submit")},success:function(e){$(".validate-otp,.resend-otp").css("pointer-events",""),$("#opt-step-2").find(".validate-otp").html("Submit"),"success"===e.response?(mobileNum=otpValidationMobileNumber.split("-"),setMobileCountryCode=mobileNum[0],setMobileNumber=mobileNum[1],tackleMobileFieldDisplayLogic(),startFillingSurvey()):$("#opt-step-2").find("h2").after('<span class="error-element"><i class="fa fa-times"></i> Entered OTP is invalid. Please try again</span>')}})}function getUniqueRefString(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<10;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function tackleMobileFieldDisplayLogic(){if("1"===isSmsSurvey||""!==otpValidationMobileNumber){var e=$(".survey-field-container[f-input-type='Mobile_Number']").first();$(e).find(".phone-input-first").val(setMobileCountryCode),$(e).find(".phone-input-second").val(setMobileNumber),$(e).hide()}}function pipingFill(e){$(".feedbackscreen-"+e).find(".field-main-label").each(function(){var a=$(this),e=a.closest(".survey-field-container").attr("id"),r=a.text();arrSrcLableText[e]?(r=arrSrcLableText[e],a.text(r)):arrSrcLableText[e]=r;var t=r.match(/\{{Q[0-9]+}}/g);t&&$.each(t,function(e,t){var i=$(".survey-field-container[question-serial-tag='"+t+"']"),n=i.attr("id");i.attr("field-type")?(replaceValue=getPipingQuestionResponse(n),r=(r=a.text()).replace(t,replaceValue)):r=(r=a.text()).replace(t,""),a.text(r)})})}function getPipingQuestionResponse(e){var t=$("#"+e),i=t.attr("field-type"),n=t.attr("options-has-image"),a=t.attr("f-name"),r=t.attr("f-field-id"),o="";switch(i){case"textbox":case"textarea":case"date":o=t.find(".field-main-text-input").val();break;case"phone_number_input_view":o=t.find(".phone-input-first").val()+t.find(".field-main-text-input").val();break;case"TermsAndConditions":case"radio_button":"1"===n?t.find("li.selected").length&&t.find("li.selected").each(function(){o=$(this).find(".choice-option-label").text()}):t.find("input").is(":checked")&&(o=t.find("input:checked").siblings(".choice-option-label").text());break;case"NumberRating":t.find(".nps-option").hasClass("selected")&&(o=t.find(".selected").find("label").text());break;case"EffortRating":t.find(".ces-button,.ces-option").hasClass("selected")&&(o=t.find(".ces-button,.ces-option").hasClass("ces-button")?t.find(".selected").text():t.find(".selected").find(".ces-option-label").text());break;case"SatisfactionRating":t.find(".css-button,.css-option").hasClass("selected")&&(o=t.find(".css-button,.css-option").hasClass("css-button")?t.find(".selected").text():t.find(".selected").find(".css-option-label").text());break;case"mcq_button":"msqquestion"===a?o="":t.find(".mcq-button").hasClass("selected")&&(o=t.find(".selected").text());break;case"drop_down":var s=t.find("option:selected").text();""!==s&&s.length&&(o=s);break;case"SliderRating":t.find(".range-break-points").find("button").hasClass("selected")&&(o=t.find(".selected").text());break;case"ScaleRating":if(1===t.find(".option-row-cont").length)if("radio_rating"===a){var c=t.find("input:checked").closest("td").index();-1!==c&&(o=t.find(".radio-label-text").find("th").eq(c).text())}else{var d=t.find(".selected").last().index();if(-1!==d&&""===(o=t.find(".help-text-top-head").find("th").eq(d).text())){var l=ratingScaleData[r].RatingType[currentLanguageCode].split(",");o=l[d-1]}}}return o}function fillEmbedResponse(){var e=parseInt(queryStringParams.referenceQuestionId),t=parseInt(queryStringParams.referenceChoiceId);if(e&&t){var i=$("#SurveyField_"+e),n=i.attr("field-type"),a=i.attr("options-has-image"),r=i.attr("f-name");switch(n){case"mcq_button":i.find('button[tag-choice-id^="'+t+'"]').trigger("click");break;case"NumberRating":i.find('.nps-option[tag-choice-id="'+t+'"]').trigger("click");break;case"EffortRating":i.find('.ces-option[tag-choice-id="'+t+'"],.ces-button[tag-choice-id="'+t+'"]').trigger("click");break;case"SatisfactionRating":i.find('.css-option[tag-choice-id="'+t+'"],.css-button[tag-choice-id="'+t+'"]').trigger("click");break;case"radio_button":case"TermsAndConditions":"1"===a?i.find('.rdo-option-withbox[tag-choice-id="'+t+'"]').trigger("click"):i.find('input[tag-choice-id="'+t+'"]').trigger("click");break;case"checkbox":"1"===a?i.find('.checkbox-option-withbox[tag-choice-id="'+t+'"]').trigger("click"):i.find('input[tag-choice-id="'+t+'"]').trigger("click");break;case"ScaleRating":1===i.find(".option-row-cont").length&&("radio_rating"===r?i.find('input[tag-choice-id="'+t+'"]').trigger("click"):i.find('.symbol-rating-choice[tag-choice-id="'+t+'"]').trigger("click"))}}}function handleDisplayOfScreenIfNoQuestioVisible(e){0===parseInt($(".feedbackscreen-"+currentScreenIndex).find(".survey-field-container:visible").size())&&("prev"===e?1<currentScreenIndex&&callPreviousScreen():(callNextScreen(),updatePaginationState()))}